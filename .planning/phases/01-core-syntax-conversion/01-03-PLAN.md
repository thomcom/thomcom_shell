---
phase: 01-core-syntax-conversion
plan: 03
type: execute
wave: 2
depends_on: [01-01, 01-02]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "All .sh files pass bash -n syntax check"
    - "No zsh-specific syntax remains in converted files"
    - "Original .zsh files still exist (not deleted)"
  artifacts: []
  key_links: []
---

<objective>
Verify all syntax conversions are valid bash and no zsh constructs remain.

Purpose: Gate check before Phase 2 (signals/hooks) - ensure clean foundation.
Output: Verification report confirming syntax conversion complete.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-core-syntax-conversion/01-01-SUMMARY.md
@.planning/phases/01-core-syntax-conversion/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Comprehensive syntax verification</name>
  <files></files>
  <action>
Run verification checks on all converted files:

**1. Syntax check all .sh files:**
```bash
cd /home/devkit/.thomcom_shell
for f in bashrc core/*.sh tools/*.sh features/*.sh interactive/*.sh logging/*.sh; do
    if [[ -f "$f" ]]; then
        bash -n "$f" || echo "FAIL: $f"
    fi
done
```

**2. Check for remaining zsh constructs:**
```bash
# These should return NO matches in .sh files:
grep -rn "setopt\|unsetopt" --include="*.sh" .
grep -rn "\[\[ -o interactive \]\]" --include="*.sh" .
grep -rn "zle \|bindkey " --include="*.sh" .
grep -rn "compinit\|compdef\|zstyle" --include="*.sh" .
grep -rn "TRAPUSR1\|TRAPEXIT" --include="*.sh" . | grep -v "TODO"
grep -rn "functions\[" --include="*.sh" .
grep -rn '${(k)' --include="*.sh" .
grep -rn '${0:A' --include="*.sh" .
```

**3. Verify bash constructs present:**
```bash
# These SHOULD have matches:
grep -l "shopt" core/options.sh core/history.sh
grep -l '\[\[ \$- ==' bashrc core/*.sh tools/*.sh interactive/*.sh logging/*.sh
grep -l "READLINE_LINE\|bind -x" tools/atuin.sh tools/fzf.sh
grep -l "bash_completion\|complete -F" interactive/completion.sh
```

**4. Count files:**
```bash
# Expected: 17 .sh files (16 modules + bashrc)
find . -maxdepth 2 -name "*.sh" -type f | wc -l
ls bashrc 2>/dev/null && echo "bashrc exists"
```

**5. Check file references in bashrc:**
```bash
# All source_module calls should reference .sh files
grep "source_module" bashrc | grep -v ".sh" && echo "ERROR: Found non-.sh references"
```

If any check fails, report the specific issue for remediation.
  </action>
  <tests skip_tests="true">
    <skip_tests_reason>Verification task - this IS the test</skip_tests_reason>
  </tests>
  <verify>All checks pass with no zsh constructs found and all files parse</verify>
  <done>Verification complete - Phase 1 requirements CORE-01 through CORE-04 and SYN-01 through SYN-04 met</done>
</task>

</tasks>

<verification>
Final Phase 1 checklist:
- [ ] CORE-01: All .zsh files have .sh equivalents
- [ ] CORE-02: bashrc exists with bash syntax
- [ ] CORE-03: No setopt calls remain (all converted to shopt or removed)
- [ ] CORE-04: No [[ -o interactive ]] remains (all converted to [[ $- == *i* ]])
- [ ] SYN-01: No zsh array syntax remains
- [ ] SYN-02: No ${(k)hash} remains
- [ ] SYN-03: No functions[name] remains
- [ ] SYN-04: No zsh-specific expansions remain
</verification>

<success_criteria>
- All 17 .sh files pass bash -n
- Zero grep matches for zsh constructs
- bashrc sources all modules correctly
- Phase 1 requirements verified complete
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-syntax-conversion/01-03-SUMMARY.md`
</output>
